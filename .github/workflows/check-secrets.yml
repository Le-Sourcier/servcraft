name: üîç Check Secrets Configuration

on:
  workflow_dispatch:  # Manual trigger only

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - name: Check if secrets are configured
        run: |
          echo "Checking secrets configuration..."

          if [ -z "${{ secrets.SERVER_SSH_KEY }}" ]; then
            echo "‚ùå SERVER_SSH_KEY is not configured"
            exit 1
          else
            echo "‚úÖ SERVER_SSH_KEY is configured (length: ${#SERVER_SSH_KEY})"
          fi

          if [ -z "${{ secrets.SERVER_HOST }}" ]; then
            echo "‚ùå SERVER_HOST is not configured"
            exit 1
          else
            echo "‚úÖ SERVER_HOST is configured: ${{ secrets.SERVER_HOST }}"
          fi

          if [ -z "${{ secrets.SERVER_USER }}" ]; then
            echo "‚ùå SERVER_USER is not configured"
            exit 1
          else
            echo "‚úÖ SERVER_USER is configured: ${{ secrets.SERVER_USER }}"
          fi

          if [ -z "${{ secrets.NEXT_PUBLIC_API_BASE_URL }}" ]; then
            echo "‚ùå NEXT_PUBLIC_API_BASE_URL is not configured"
            exit 1
          else
            echo "‚úÖ NEXT_PUBLIC_API_BASE_URL is configured: ${{ secrets.NEXT_PUBLIC_API_BASE_URL }}"
          fi

          if [ -z "${{ secrets.ADMIN_JWT_SECRET }}" ]; then
            echo "‚ùå ADMIN_JWT_SECRET is not configured"
            exit 1
          else
            echo "‚úÖ ADMIN_JWT_SECRET is configured (length: ${#ADMIN_JWT_SECRET})"
          fi

          echo ""
          echo "üéâ All secrets are properly configured!"
        env:
          SERVER_SSH_KEY: ${{ secrets.SERVER_SSH_KEY }}
          ADMIN_JWT_SECRET: ${{ secrets.ADMIN_JWT_SECRET }}
